{
    "$schema": "https://json-schema.org/draft/2019-09/schema",
    "$id": "https://raw.githubusercontent.com/Azure-Samples/ai-foundry-starter-basic/schemas/v0.9/ai.yaml.json",
    "title": "Azure AI Foundry Configuration Schema",
    "description": "Schema for ai.yaml configuration files used in Azure AI Foundry projects",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "deployments": {
            "type": "array",
            "title": "The Azure OpenAI model deployments",
            "description": "Deploys the listed Azure OpenAI models to an Azure OpenAI service",
            "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "name": {
                        "type": "string",
                        "title": "The deployment name",
                        "description": "The resource name for the deployment"
                    },
                    "model": {
                        "type": "object",
                        "additionalProperties": false,
                        "title": "Properties of Cognitive Services account deployment model",
                        "description": "Full list of supported models and versions are available at https://learn.microsoft.com/azure/ai-services/openai/concepts/models",
                        "properties": {
                            "format": {
                                "type": "string",
                                "title": "Deployment model format",
                                "description": "The format of the deployment model"
                            },
                            "name": {
                                "type": "string",
                                "title": "Deployment model name",
                                "description": "The well known name of the model"
                            },
                            "publisher": {
                                "type": "string",
                                "title": "Deployment model publisher",
                                "description": "The publisher of the deployment model"
                            },
                            "source": {
                                "type": "string",
                                "title": "Deployment model source",
                                "description": "Optional. Deployment model source ARM resource ID"
                            },
                            "sourceAccount": {
                                "type": "string",
                                "title": "Source account",
                                "description": "Optional. Source of the model, another Microsoft.CognitiveServices accounts ARM resource ID"
                            },
                            "version": {
                                "type": "string",
                                "title": "Deployment model version",
                                "description": "Optional. Deployment model version. If version is not specified, a default version will be assigned. The default version is different for different models and might change when there is new version available for a model. Default version for a model could be found from list models API"
                            }
                        },
                        "required": [
                            "name"
                        ]
                    },
                    "sku": {
                        "type": "object",
                        "additionalProperties": false,
                        "title": "The resource model definition representing SKU",
                        "description": "The SKU configuration for the deployment",
                        "properties": {
                            "name": {
                                "type": "string",
                                "title": "SKU name",
                                "description": "The name of the SKU. Ex - P3. It is typically a letter+number code"
                            },
                            "capacity": {
                                "type": "integer",
                                "title": "SKU capacity",
                                "description": "If the SKU supports scale out/in then the capacity integer should be included. If scale out/in is not possible for the resource this may be omitted"
                            },
                            "family": {
                                "type": "string",
                                "title": "SKU family",
                                "description": "If the service has different generations of hardware, for the same SKU, then that can be captured here"
                            },
                            "size": {
                                "type": "string",
                                "title": "SKU size",
                                "description": "The SKU size. When the name field is the combination of tier and some other value, this would be the standalone code"
                            },
                            "tier": {
                                "type": "string",
                                "title": "SKU tier",
                                "description": "This field is required to be implemented by the Resource Provider if the service has more than one tier, but is not required on a PUT",
                                "enum": [
                                    "Basic",
                                    "Enterprise",
                                    "Free", 
                                    "Premium",
                                    "Standard"
                                ]
                            }
                        },
                        "required": [
                            "name"
                        ]
                    },
                    "capacitySettings": {
                        "type": "object",
                        "additionalProperties": false,
                        "title": "Deployment capacity settings",
                        "description": "Internal use only",
                        "properties": {
                            "designatedCapacity": {
                                "type": "integer",
                                "title": "Designated capacity",
                                "description": "The designated capacity",
                                "minimum": 0
                            },
                            "priority": {
                                "type": "integer",
                                "title": "Priority",
                                "description": "The priority of this capacity setting",
                                "minimum": 0
                            }
                        }
                    },
                    "currentCapacity": {
                        "type": "integer",
                        "title": "Current capacity",
                        "description": "The current capacity"
                    },
                    "parentDeploymentName": {
                        "type": "string",
                        "title": "Parent deployment name",
                        "description": "The name of parent deployment"
                    },
                    "raiPolicyName": {
                        "type": "string",
                        "title": "RAI policy name",
                        "description": "The name of RAI policy"
                    },
                    "scaleSettings": {
                        "type": "object",
                        "additionalProperties": false,
                        "title": "Deployment scale settings",
                        "description": "Properties of Cognitive Services account deployment model. (Deprecated, please use sku instead.)",
                        "properties": {
                            "capacity": {
                                "type": "integer",
                                "title": "Deployment capacity",
                                "description": "Deployment capacity"
                            },
                            "scaleType": {
                                "type": "string",
                                "title": "Deployment scale type",
                                "description": "Deployment scale type",
                                "enum": [
                                    "Manual",
                                    "Standard"
                                ]
                            }
                        }
                    },
                    "spilloverDeploymentName": {
                        "type": "string",
                        "title": "Spillover deployment name",
                        "description": "Specifies the deployment name that should serve requests when the request would have otherwise been throttled due to reaching current deployment throughput limit"
                    },
                    "versionUpgradeOption": {
                        "type": "string",
                        "title": "Version upgrade option",
                        "description": "Deployment model version upgrade option",
                        "enum": [
                            "NoAutoUpgrade",
                            "OnceCurrentVersionExpired",
                            "OnceNewDefaultVersionAvailable"
                        ]
                    },
                    "tags": {
                        "type": "object",
                        "title": "Resource tags",
                        "description": "Resource tags for the deployment",
                        "additionalProperties": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "name",
                    "model"
                ]
            }
        },
        "connections": {
            "type": "array",
            "title": "The Azure AI project connections",
            "description": "Defines connections to external services for the Azure AI project",
            "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "name": {
                        "type": "string",
                        "title": "The connection name",
                        "description": "Name of the connection resource",
                        "pattern": "^[a-zA-Z0-9][a-zA-Z0-9_-]{2,32}$"
                    },
                    "category": {
                        "type": "string",
                        "title": "The connection category",
                        "description": "Category of the connection",
                        "enum": [
                            "ADLSGen2",
                            "AIServices",
                            "AmazonMws",
                            "AmazonRdsForOracle",
                            "AmazonRdsForSqlServer",
                            "AmazonRedshift",
                            "AmazonS3Compatible",
                            "ApiKey",
                            "AzureBlob",
                            "AzureDatabricksDeltaLake",
                            "AzureDataExplorer",
                            "AzureMariaDb",
                            "AzureMySqlDb",
                            "AzureOneLake",
                            "AzureOpenAI",
                            "AzurePostgresDb",
                            "AzureSqlDb",
                            "AzureSqlMi",
                            "AzureSynapseAnalytics",
                            "AzureTableStorage",
                            "BingLLMSearch",
                            "Cassandra",
                            "CognitiveSearch",
                            "CognitiveService",
                            "Concur",
                            "ContainerRegistry",
                            "CosmosDb",
                            "CosmosDbMongoDbApi",
                            "Couchbase",
                            "CustomKeys",
                            "Db2",
                            "Drill",
                            "Dynamics",
                            "DynamicsAx",
                            "DynamicsCrm",
                            "Elasticsearch",
                            "Eloqua",
                            "FileServer",
                            "FtpServer",
                            "GenericContainerRegistry",
                            "GenericHttp",
                            "GenericRest",
                            "Git",
                            "GoogleAdWords",
                            "GoogleBigQuery",
                            "GoogleCloudStorage",
                            "Greenplum",
                            "Hbase",
                            "Hdfs",
                            "Hive",
                            "Hubspot",
                            "Impala",
                            "Informix",
                            "Jira",
                            "Magento",
                            "ManagedOnlineEndpoint",
                            "MariaDb",
                            "Marketo",
                            "MicrosoftAccess",
                            "MongoDbAtlas",
                            "MongoDbV2",
                            "MySql",
                            "Netezza",
                            "ODataRest",
                            "Odbc",
                            "Office365",
                            "OpenAI",
                            "Oracle",
                            "OracleCloudStorage",
                            "OracleServiceCloud",
                            "PayPal",
                            "Phoenix",
                            "Pinecone",
                            "PostgreSql",
                            "Presto",
                            "PythonFeed",
                            "QuickBooks",
                            "Redis",
                            "Responsys",
                            "S3",
                            "Salesforce",
                            "SalesforceMarketingCloud",
                            "SalesforceServiceCloud",
                            "SapBw",
                            "SapCloudForCustomer",
                            "SapEcc",
                            "SapHana",
                            "SapOpenHub",
                            "SapTable",
                            "Serp",
                            "Serverless",
                            "ServiceNow",
                            "Sftp",
                            "SharePointOnlineList",
                            "Shopify",
                            "Snowflake",
                            "Spark",
                            "SqlServer",
                            "Square",
                            "Sybase",
                            "Teradata",
                            "Vertica",
                            "WebTable",
                            "Xero",
                            "Zoho"
                        ]
                    },
                    "target": {
                        "type": "string",
                        "title": "The connection target",
                        "description": "The connection URL to be used"
                    },
                    "authType": {
                        "type": "string",
                        "title": "The authentication type",
                        "description": "Authentication method for the connection",
                        "enum": [
                            "AAD",
                            "AccessKey",
                            "AccountKey",
                            "ApiKey",
                            "CustomKeys",
                            "ManagedIdentity",
                            "None",
                            "OAuth2",
                            "PAT",
                            "SAS",
                            "ServicePrincipal",
                            "UsernamePassword"
                        ]
                    },
                    "credentials": {
                        "type": "object",
                        "title": "Connection credentials",
                        "description": "Authentication credentials for the connection. Credential values are not stored in the YAML configuration and must be provided separately during deployment.",
                        "additionalProperties": false,
                        "properties": {}
                    },
                    "metadata": {
                        "type": "object",
                        "title": "Connection metadata",
                        "description": "Store user metadata for this connection",
                        "additionalProperties": {
                            "type": "string"
                        }
                    },
                    "error": {
                        "type": "string",
                        "title": "Connection error",
                        "description": "Provides the error message if the connection fails"
                    },
                    "expiryTime": {
                        "type": "string",
                        "title": "Expiry time",
                        "description": "The expiry time for the connection"
                    },
                    "isSharedToAll": {
                        "type": "boolean",
                        "title": "Shared to all users",
                        "description": "Whether the connection is shared to all users in the workspace",
                        "default": false
                    },
                    "sharedUserList": {
                        "type": "array",
                        "title": "Shared user list",
                        "description": "List of users who have access to this connection",
                        "items": {
                            "type": "string"
                        }
                    },
                    "peRequirement": {
                        "type": "string",
                        "title": "Private endpoint requirement",
                        "description": "Specifies how private endpoints are used with this connection",
                        "enum": [
                            "NotApplicable",
                            "NotRequired",
                            "Required"
                        ]
                    },
                    "peStatus": {
                        "type": "string",
                        "title": "Private endpoint status",
                        "description": "Specifies the status of private endpoints for this connection",
                        "enum": [
                            "Active",
                            "Inactive",
                            "NotApplicable"
                        ]
                    },
                    "useWorkspaceManagedIdentity": {
                        "type": "boolean",
                        "title": "Use workspace managed identity",
                        "description": "Whether to use workspace managed identity for this connection"
                    }
                },
                "required": [
                    "name",
                    "category",
                    "target",
                    "authType"
                ]

            }
        },
        "resources": {
            "type": "array",
            "title": "The Azure resources to provision",
            "description": "Defines Azure resources that should be provisioned for the AI project",
            "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "connection_name": {
                        "type": "string",
                        "title": "The connection name",
                        "description": "Name of the connection that will reference this resource"
                    },
                    "resource": {
                        "type": "string",
                        "title": "The resource type",
                        "description": "Type of Azure resource to provision",
                        "enum": [
                            "AzureContainerRegistry",
                            "AzureStorage",
                            "AzureAISearch",
                            "BingSearch",
                            "BingCustomSearch"
                        ]
                    }
                },
                "required": [
                    "connection_name",
                    "resource"
                ]
            }
        }
    },
    "required": [
        "deployments"
    ]
}